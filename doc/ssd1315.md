# 图像转换
//https://javl.github.io/image2cpp/ 
下面是 SSD1315 / SSD1306 支持的常用 命令列表，这些命令用于控制 OLED 显示器的显示状态、寻址模式、亮度、偏移、反转等功能。

# 命令大全
✅ 这些命令是通过 I²C 或 SPI 发送的，前缀控制字节为 0x00（表示是命令）。

⸻

✅ 显示控制类命令

命令码	含义
0xAE	关闭显示（Display OFF）
0xAF	开启显示（Display ON）
0xA4	显示 RAM 内容（正常显示）
0xA5	忽略 RAM，所有像素点亮（全亮）
0xA6	正常显示（像素=1 点亮）
0xA7	反转显示（像素=1 变黑）
0xE0	禁用滚动（Deactivate scroll）


⸻

✅ 地址设置类命令

命令码	含义
0x20	设置寻址模式（Horizontal/Vertical/Page）
0x21	设置列地址范围（start_column, end_column）
0x22	设置页地址范围（start_page, end_page）
0xB0~0xB7	设置当前页地址（Page Addressing 模式）
0x00~0x0F	设置低列地址（低 4 位）
0x10~0x1F	设置高列地址（高 4 位）


⸻

✅ 显示格式设置

命令码	含义
0xA0	设置列地址映射：正常（A0）
0xA1	设置列地址映射：左右反转
0xC0	设置行扫描方向：正常（从上）
0xC8	设置行扫描方向：反转（从下）


⸻

✅ 偏移/起始行设置

命令码	含义
0xD3, n	设置显示偏移量（Display Offset）
0x40~0x7F	设置起始行地址（Set Display Start Line）


⸻

✅ 亮度、电源相关

命令码	含义
0x81, n	设置对比度（亮度，0~255）
0x8D, 0x14	打开 charge pump（必要）
0x8D, 0x10	关闭 charge pump


⸻

✅ 滚动功能（可选）

命令码	含义
0x26	水平向右滚动（setup）
0x27	水平向左滚动（setup）
0x29	垂直右滚动（setup）
0x2A	垂直左滚动（setup）
0xA3	启用滚动（Activate Scroll）
0xE3	NOP，占位空操作


⸻

✅ 电源与时序设置（高级）

命令码	含义
0xD5, n	设置时钟分频率
0xD9, n	设置预充电周期（pre-charge）
0xDB, n	设置VCOMH电平


⸻

🧠 示例：初始化 OLED 常见指令序列（简化版）

0xAE         // 关闭显示
0x20, 0x00   // 水平寻址模式
0xA1         // 列翻转（可选）
0xC8         // 行翻转（可选）
0x81, 0x7F   // 对比度设置
0xA6         // 正常显示
0xD3, 0x00   // 无偏移
0xAF         // 开启显示


⸻

如果你告诉我你想实现某种显示效果，比如“反转、镜像、滚动”等，我可以告诉你用哪些命令组合达成。是否需要？


# 初始化

要在 SSD1306 / SSD1315 OLED 显示屏上显示一张图片（字节流），你必须先完成一组初始化命令，这些命令用于配置 OLED 的工作模式、显示方式、寻址模式等。

以下是你显示图片前，必须执行的一套最小可用初始化指令序列，适用于 I²C 接口和页寻址（或水平寻址）模式：

⸻

✅ 最小初始化命令列表（按顺序发送）

命令	说明
0xAE	关闭显示（Display OFF）
0x20, 0x00	设置为 水平寻址模式
0xA1	设置列地址映射方向（镜像，左右反转）
0xC8	设置行扫描方向（上下反转）
0x81, 0x7F	设置对比度（0x00~0xFF，亮度）
0xA4	显示 RAM 内容（正常显示）
0xA6	正常显示（非反转）
0xD3, 0x00	设置垂直偏移为 0
0xD5, 0x80	设置显示时钟分频（推荐值）
0xD9, 0xF1	设置预充电周期
0xDA, 0x12	设置 COM 引脚配置（根据屏幕型号可调）
0xDB, 0x40	设置 VCOMH 电压
0x8D, 0x14	打开 charge pump（必须）
0xAF	开启显示（Display ON）


⸻

🔁 示例发送流程（Rust 伪代码）

let init_cmds = [
    0x00, // 控制字节，表示后面是命令
    0xAE,
    0x20, 0x00,
    0xA1,
    0xC8,
    0x81, 0x7F,
    0xA4,
    0xA6,
    0xD3, 0x00,
    0xD5, 0x80,
    0xD9, 0xF1,
    0xDA, 0x12,
    0xDB, 0x40,
    0x8D, 0x14,
    0xAF,
];
i2c.blocking_write(0x3C, &init_cmds).unwrap();  // 设备地址可能是 0x3C


⸻

🎨 接下来显示图像
	1.	设置列/页地址范围（写入窗口）：

0x21, 0, 127  // 列地址范围（全部列）
0x22, 0, 7    // 页地址范围（全部页）


	2.	然后发送图像字节（每列一个字节，一页 8 行）：

i2c.blocking_write(0x3C, &[0x40, 0xFF, 0x00, 0xAA, ...]); // 控制字节 0x40 + 图像数据
